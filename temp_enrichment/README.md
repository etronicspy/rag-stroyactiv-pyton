# üîÄ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä —Ü–µ–Ω —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

## üìã –û–±–∑–æ—Ä

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä —Ü–µ–Ω —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ - —ç—Ç–æ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü –∏ —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏–∑ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

1. **RegEx –ø–∞—Ä—Å–µ—Ä** - –±—ã—Å—Ç—Ä—ã–π –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
2. **AI –ø–∞—Ä—Å–µ—Ä** - —Ç–æ—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ OpenAI API –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
4. **Price Enricher** - –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
export OPENAI_API_KEY=your_api_key_here
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –¢–æ–ª—å–∫–æ RegEx –ø–∞—Ä—Å–µ—Ä (–±—ã—Å—Ç—Ä–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
python main.py regex-only test_materials_image.json -o results_regex.json

# –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä (RegEx + AI fallback)
python main.py hybrid test_materials_image.json -o results_hybrid.json

# –ü–æ–ª–Ω—ã–π enricher —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏
python main.py enricher test_materials_image.json -o results_enriched.json -r report.json

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python main.py hybrid test_materials_image.json -v --hide-failed
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
temp_enrichment/
‚îú‚îÄ‚îÄ main.py               # üéØ –ï–¥–∏–Ω—ã–π CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ regex_parser.py       # üìù RegEx –ø–∞—Ä—Å–µ—Ä (13 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)
‚îú‚îÄ‚îÄ ai_parser.py          # ü§ñ AI –ø–∞—Ä—Å–µ—Ä —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ hybrid_parser.py      # üîÄ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä (RegEx + AI)
‚îú‚îÄ‚îÄ price_enricher.py     # üíé –ü–æ–ª–Ω—ã–π enricher —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏
‚îú‚îÄ‚îÄ prompts.yaml          # üìã –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è AI
‚îú‚îÄ‚îÄ test_materials_image.json # üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ requirements.txt      # üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### 1. RegEx Parser (`regex_parser.py`)

–ë—ã—Å—Ç—Ä—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å 13 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏:

```python
from regex_parser import RegexParser

parser = RegexParser()
result = parser.parse_product("OSB-3 2500x1250x12 –º–º", 919.0, "—à—Ç")
print(f"–ü–ª–æ—â–∞–¥—å: {result.quantity} {result.metric_unit}")
print(f"–¶–µ–Ω–∞ –∑–∞ –º¬≤: {result.price_per_unit:.2f} —Ä—É–±/–º¬≤")
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
- –ü—Ä—è–º—ã–µ –µ–¥–∏–Ω–∏—Ü—ã: `50–∫–≥`, `2.5–ª`, `15–º¬≤`, `5–º¬≥`
- –†–∞–∑–º–µ—Ä—ã: `2500x1250x12 –º–º` ‚Üí –ø–ª–æ—â–∞–¥—å/–æ–±—ä–µ–º
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: –∫–∏—Ä–ø–∏—á, –≥–∞–∑–æ–±–µ—Ç–æ–Ω, —Ä—É–ª–æ–Ω—ã

### 2. AI Parser (`ai_parser.py`)

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:

```python
from ai_parser import AIParser

parser = AIParser()
result = parser.parse_product("–ö–∏—Ä–ø–∏—á –ø–æ–ª–Ω–æ—Ç–µ–ª—ã–π –ú-150 (250x120x65)", 13.0, "—à—Ç")
print(f"–û–±—ä–µ–º: {result.price_coefficient} {result.metric_unit}")
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏
- –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–æ 5 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ä–∞–∑)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ legacy/–Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π OpenAI API

### 3. Hybrid Parser (`hybrid_parser.py`)

–û–±—ä–µ–¥–∏–Ω—è–µ—Ç RegEx –∏ AI –ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```python
from hybrid_parser import HybridParser
from regex_parser import RegexParser
from ai_parser import AIParser

hybrid = HybridParser(RegexParser(), AIParser())
results = hybrid.parse_batch(products)
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è RegEx –ø–∞—Ä—Å–µ—Ä
2. –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI –ø–∞—Ä—Å–µ—Ä
3. –í–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 4. Price Enricher (`price_enricher.py`)

–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏:

```python
from price_enricher import PriceEnricher

enricher = PriceEnricher(use_ai=True, batch_size=5)
enriched_products = enricher.enrich_products(products)
enricher.save_results(enriched_products, "enriched_materials.json")
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —á–µ—Ä–µ–∑ OpenAI Embeddings API
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

## üìä –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

| –ü–æ–¥—Ö–æ–¥ | –£—Å–ø–µ—à–Ω–æ—Å—Ç—å | –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ 1000 —Ç–æ–≤–∞—Ä–æ–≤ | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|------------|---------------------------|----------|
| –¢–æ–ª—å–∫–æ RegEx | ~60-70% | 0 ‚ÇΩ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| –¢–æ–ª—å–∫–æ AI | ~95-98% | ~300 ‚ÇΩ | –°—Ä–µ–¥–Ω—è—è |
| **–ì–∏–±—Ä–∏–¥–Ω—ã–π** | ~95-98% | ~30-50 ‚ÇΩ | –í—ã—Å–æ–∫–∞—è |

**–≠–∫–æ–Ω–æ–º–∏—è: ~90%** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —á–∏—Å—Ç—ã–º AI –ø–æ–¥—Ö–æ–¥–æ–º –ø—Ä–∏ —Ç–æ–π –∂–µ —Ç–æ—á–Ω–æ—Å—Ç–∏.

## üéØ –ö–æ–º–∞–Ω–¥—ã CLI

### `regex-only` - –¢–æ–ª—å–∫–æ RegEx –ø–∞—Ä—Å–µ—Ä

```bash
python main.py regex-only test_materials_image.json -o results.json -v
```

**–û–ø—Ü–∏–∏:**
- `-o, --output` - –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª
- `-v, --verbose` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--hide-failed` - —Å–∫—Ä—ã—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### `hybrid` - –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä

```bash
python main.py hybrid test_materials_image.json \
    -o results.json \
    -c ai_cache.json \
    -b 5 \
    -v
```

**–û–ø—Ü–∏–∏:**
- `-o, --output` - –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª
- `-c, --cache` - —Ñ–∞–π–ª –∫–µ—à–∞ –¥–ª—è AI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `ai_cache.json`)
- `-b, --batch-size` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è AI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- `-v, --verbose` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--hide-failed` - —Å–∫—Ä—ã—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### `enricher` - –ü–æ–ª–Ω—ã–π enricher

```bash
python main.py enricher test_materials_image.json \
    -o enriched.json \
    -r report.json \
    --no-ai \
    -v
```

**–û–ø—Ü–∏–∏:**
- `-o, --output` - –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª
- `-r, --report` - —Ñ–∞–π–ª –æ—Ç—á–µ—Ç–∞
- `-c, --cache` - —Ñ–∞–π–ª –∫–µ—à–∞ –¥–ª—è AI
- `-b, --batch-size` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è AI
- `--no-ai` - –æ—Ç–∫–ª—é—á–∏—Ç—å AI –ø–∞—Ä—Å–µ—Ä
- `-v, --verbose` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--hide-failed` - —Å–∫—Ä—ã—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üìà –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–µ —Å–ª—É—á–∞–∏ RegEx –ø–∞—Ä—Å–µ—Ä–∞:

```
‚úÖ  1. OSB-3 2500x1250x12 –º–º                        ‚Üí    3.125 –º2  |   294.08 ‚ÇΩ/–º2 | sheet_area_dimensions
‚úÖ  2. –¶–µ–º–µ–Ω—Ç 50–∫–≥                                   ‚Üí   50.000 –∫–≥  |     6.00 ‚ÇΩ/–∫–≥ | direct_weight_kg
‚úÖ  3. –†—É–±–µ—Ä–æ–∏–¥ –†–ö–ü-350 1x15 –ì–û–°–¢                    ‚Üí   15.000 –º2  |    24.67 ‚ÇΩ/–º2 | roofing_material
```

### –°–ª—É—á–∞–∏ –¥–ª—è AI –ø–∞—Ä—Å–µ—Ä–∞:

```
‚úÖ  4. –ö–∏—Ä–ø–∏—á –ø–æ–ª–Ω–æ—Ç–µ–ª—ã–π –ú-150 (250x120x65)          ‚Üí    0.002 –º3  |  6666.67 ‚ÇΩ/–º3 | ai_fallback
‚úÖ  5. –ü–µ–Ω–∞ PROFFLEX PRO RED 65 PLUS –ó–ò–ú–ê            ‚Üí    0.850 –ª   |   451.76 ‚ÇΩ/–ª  | ai_fallback
```

## üîç –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```
‚è±Ô∏è  –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 2.45 —Å–µ–∫—É–Ω–¥
üéØ –û–±—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 35/37 (94.6%)
‚ùå –ù–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–æ: 2 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (5.4%)

üîç –ò–°–¢–û–ß–ù–ò–ö–ò –ü–ê–†–°–ò–ù–ì–ê:
   RegEx: 28 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (75.7%)
   AI:    7 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (18.9%)
   None:  2 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (5.4%)

üìä –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û –ï–î–ò–ù–ò–¶–ê–ú –ò–ó–ú–ï–†–ï–ù–ò–Ø:
   –º2 : 18 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (48.6%)
   –∫–≥ :  8 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (21.6%)
   –º3 :  7 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (18.9%)
   –ª  :  2 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (5.4%)

üí∞ –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø AI:
   –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ API: 2
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤: 156
   –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 8.75‚ÇΩ
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö RegEx –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```python
# –í regex_parser.py
self.PATTERNS = [
    # –ù–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω
    (r'–≤–∞—à_–ø–∞—Ç—Ç–µ—Ä–Ω_regex', '–Ω–∞–∑–≤–∞–Ω–∏–µ_–º–µ—Ç–æ–¥–∞'),
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã...
]
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI –ø—Ä–æ–º–ø—Ç–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `prompts.yaml`:

```yaml
system: |
  –í–∞—à–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI...

single: |
  –¢–æ–≤–∞—Ä: "{name}"
  –¶–µ–Ω–∞: {price} {unit}
  
batch_intro: |
  –û–±—Ä–∞–±–æ—Ç–∞–π –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä...
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏
parser = AIParser(batch_size=10)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª –∫–µ—à–∞
parser = AIParser(cache_file="my_cache.json")
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º

–ú–æ–¥—É–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º `rag-stroyactiv-pyton`:

```python
# –í –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
from temp_enrichment.price_enricher import PriceEnricher
from temp_enrichment.hybrid_parser import HybridParser

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
enricher = PriceEnricher(use_ai=True)
enriched_materials = enricher.enrich_products(raw_materials)
```

## üìã –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```json
[
  {
    "name": "–¶–µ–º–µ–Ω—Ç –ú-400 50–∫–≥",
    "price": 300.0,
    "unit": "–º–µ—à–æ–∫"
  },
  {
    "name": "OSB-3 2500x1250x12 –º–º",
    "price": 919.0,
    "unit": "–ª–∏—Å—Ç"
  }
]
```

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```json
{
  "metadata": {
    "timestamp": "2024-01-20 15:30:45",
    "total_materials": 2,
    "parsed_count": 2,
    "success_rate": "100.0%",
    "processing_time_seconds": 1.23,
    "ai_requests": 0,
    "ai_tokens": 0,
    "ai_cost_rub": 0.00
  },
  "results": [
    {
      "original_name": "–¶–µ–º–µ–Ω—Ç –ú-400 50–∫–≥",
      "original_price": 300.0,
      "original_unit": "–º–µ—à–æ–∫",
      "metric_unit": "–∫–≥",
      "quantity": 50.0,
      "price_per_unit": 6.0,
      "price_coefficient": 50.0,
      "parsing_method": "direct_weight_kg",
      "confidence": 0.9,
      "embedding": [0.1, 0.2, ...]
    }
  ]
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ö–µ—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ JSON —Ñ–∞–π–ª–∞—Ö
- –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **RegEx –ø–∞—Ä—Å–µ—Ä**: ~10,000 —Ç–æ–≤–∞—Ä–æ–≤/—Å–µ–∫
- **AI –ø–∞—Ä—Å–µ—Ä**: ~50-100 —Ç–æ–≤–∞—Ä–æ–≤/—Å–µ–∫ (—Å –±–∞—Ç—á–∏–Ω–≥–æ–º)
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π**: ~1,000 —Ç–æ–≤–∞—Ä–æ–≤/—Å–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è RegEx/AI)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ú–æ–¥—É–ª—å —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞ `rag-stroyactiv-pyton` –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- Python 3.9+
- OpenAI API (legacy –∏ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 