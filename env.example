# ===================================
# RAG Construction Materials API Configuration Example
# ===================================
# 
# Copy this file to .env.local and fill in your actual values
# 
# ВАЖНО: НЕ коммитьте файлы с реальными секретами!
# Используйте только env.example для примеров
#

# ===================================
# ENVIRONMENT SETTINGS
# ===================================
# Среда: development, staging, production
ENVIRONMENT=development

# ===================================
# PROJECT SETTINGS  
# ===================================
PROJECT_NAME=RAG Construction Materials API
VERSION=1.0.0
API_V1_STR=/api/v1

# ===================================
# CORS CONFIGURATION
# ===================================
# Список разрешенных origins для CORS (JSON array)
# Для разработки: ["http://localhost:3000", "http://127.0.0.1:3000"]
# Для продакшн: указать конкретные домены
BACKEND_CORS_ORIGINS=["*"]

# ===================================
# VECTOR DATABASE CONFIGURATION
# ===================================
# Тип векторной БД: qdrant_cloud, qdrant_local, weaviate, pinecone
DATABASE_TYPE=qdrant_cloud

# --- Qdrant Settings ---
QDRANT_URL=https://your-cluster-url.qdrant.io:6333
QDRANT_API_KEY=your_qdrant_api_key_here
QDRANT_COLLECTION_NAME=materials
QDRANT_VECTOR_SIZE=1536
QDRANT_TIMEOUT=60

# --- Weaviate Settings (Optional) ---
WEAVIATE_URL=https://your-cluster.weaviate.network
WEAVIATE_API_KEY=your_weaviate_api_key_here

# --- Pinecone Settings (Optional) ---
PINECONE_API_KEY=your_pinecone_api_key_here
PINECONE_ENVIRONMENT=your_pinecone_environment

# ===================================
# POSTGRESQL CONFIGURATION
# ===================================
# Полный URL подключения (рекомендуется)
POSTGRESQL_URL=postgresql+asyncpg://username:password@localhost:5432/materials

# ИЛИ отдельные компоненты (если не используется POSTGRESQL_URL)
POSTGRESQL_USER=materials_user
POSTGRESQL_PASSWORD=your_secure_password
POSTGRESQL_HOST=localhost
POSTGRESQL_PORT=5432
POSTGRESQL_DATABASE=materials

# Connection Pool Settings
POSTGRESQL_POOL_SIZE=10
POSTGRESQL_MAX_OVERFLOW=20

# ===================================
# REDIS CONFIGURATION
# ===================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password_if_any
REDIS_DB=0
REDIS_MAX_CONNECTIONS=10
REDIS_TIMEOUT=30

# ===================================
# AI PROVIDER CONFIGURATION
# ===================================
# AI Provider: openai, azure_openai, huggingface, ollama
AI_PROVIDER=openai

# --- OpenAI Settings ---
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_MODEL=text-embedding-3-small
OPENAI_MAX_RETRIES=5
OPENAI_TIMEOUT=60

# --- Azure OpenAI Settings (Optional) ---
AZURE_OPENAI_API_KEY=your_azure_openai_key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_MODEL=text-embedding-ada-002

# --- HuggingFace Settings (Optional) ---
HUGGINGFACE_MODEL=sentence-transformers/all-MiniLM-L6-v2
HUGGINGFACE_DEVICE=cpu

# --- Ollama Settings (Optional) ---
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# ===================================
# PERFORMANCE SETTINGS
# ===================================
# Максимальный размер загружаемого файла (в байтах)
MAX_UPLOAD_SIZE=52428800  # 50MB

# Размер батча для обработки
BATCH_SIZE=100

# Максимальное количество одновременных загрузок
MAX_CONCURRENT_UPLOADS=5

# ===================================
# MIDDLEWARE SETTINGS
# ===================================
# Security settings
MAX_REQUEST_SIZE_MB=50
ENABLE_SECURITY_HEADERS=true
ENABLE_INPUT_VALIDATION=true

# Rate limiting settings  
ENABLE_RATE_LIMITING=false
RATE_LIMIT_RPM=60
RATE_LIMIT_RPH=1000
RATE_LIMIT_BURST=10

# Logging settings
LOG_REQUEST_BODY=true
LOG_RESPONSE_BODY=false
ENABLE_STRUCTURED_LOGGING=false

# ===================================
# DATABASE INITIALIZATION SETTINGS
# ===================================
# Автоматически запускать миграции при старте
AUTO_MIGRATE=true

# Автоматически заполнять референсные данные при старте  
AUTO_SEED=true

# ===================================
# PRODUCTION SETTINGS (Только реальная Qdrant)
# ===================================
# Использовать только реальную Qdrant БД
QDRANT_ONLY_MODE=true

# Отключить fallback к mock базам данных для продакшн
ENABLE_FALLBACK_DATABASES=false

# Отключить подключение к Redis (использовать мки)
DISABLE_REDIS_CONNECTION=true

# Отключить подключение к PostgreSQL (использовать моки)
DISABLE_POSTGRESQL_CONNECTION=true

# ===================================
# LOGGING SETTINGS
# ===================================
# Уровень логирования: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=DEBUG

# Файл для логов (опционально)
LOG_FILE=logs/app.log

# Включить подробное логирование запросов
ENABLE_REQUEST_LOGGING=true 