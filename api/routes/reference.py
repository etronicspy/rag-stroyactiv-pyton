from typing import List
from fastapi import APIRouter, Depends
from core.schemas.materials import Category, Unit
from services.materials import CategoryService, UnitService
from core.database.interfaces import IVectorDatabase
from core.dependencies.database import get_vector_db_dependency
from core.schemas.response_models import ERROR_RESPONSES

router = APIRouter(responses=ERROR_RESPONSES)

def get_category_service(
    vector_db: IVectorDatabase = Depends(get_vector_db_dependency)
) -> CategoryService:
    """Get CategoryService with dependency injection."""
    return CategoryService(vector_db=vector_db)

def get_unit_service(
    vector_db: IVectorDatabase = Depends(get_vector_db_dependency)
) -> UnitService:
    """Get UnitService with dependency injection."""
    return UnitService(vector_db=vector_db)

@router.post(
    "/categories/",
    response_model=Category,
    summary="üè∑Ô∏è Create Category ‚Äì –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    response_description="–°–æ–∑–¥–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è"
)
async def create_category(
    category: Category,
    service: CategoryService = Depends(get_category_service)
):
    """
    üè∑Ô∏è **Create Category** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    
    –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
    –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–º–æ–≥–∞—é—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é.
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üÜî –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    - üîç –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    - ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    - üìù –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
    - üóÑÔ∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î
    
    **Required Fields:**
    - `name`: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
    
    **Optional Fields:**
    - `description`: –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    
    **Request Body Example:**
    ```json
    {
        "name": "–¶–µ–º–µ–Ω—Ç",
        "description": "–í—è–∂—É—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä—Ç–ª–∞–Ω–¥—Ü–µ–º–µ–Ω—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ—Ç–æ–Ω–Ω—ã—Ö —Å–º–µ—Å–µ–π"
    }
    ```
    
    **Response Example:**
    ```json
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "–¶–µ–º–µ–Ω—Ç",
        "description": "–í—è–∂—É—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä—Ç–ª–∞–Ω–¥—Ü–µ–º–µ–Ω—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ—Ç–æ–Ω–Ω—ã—Ö —Å–º–µ—Å–µ–π",
        "created_at": "2025-06-16T17:30:15.123456Z",
        "updated_at": "2025-06-16T17:30:15.123456Z"
    }
    ```
    
    **Response Status Codes:**
    - **201 Created**: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
    - **400 Bad Request**: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–¥—É–±–ª–∏–∫–∞—Ç –Ω–∞–∑–≤–∞–Ω–∏—è)
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
    
    **Common Categories:**
    - –¶–µ–º–µ–Ω—Ç, –ö–∏—Ä–ø–∏—á, –ê—Ä–º–∞—Ç—É—Ä–∞, –ë–µ—Ç–æ–Ω, –ü–µ—Å–æ–∫, –©–µ–±–µ–Ω—å
    - –£—Ç–µ–ø–ª–∏—Ç–µ–ª–∏, –ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è, –ú–µ—Ç–∞–ª–ª–æ–ø—Ä–æ–∫–∞—Ç
    - –õ–∞–∫–æ–∫—Ä–∞—Å–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –°—É—Ö–∏–µ —Å–º–µ—Å–∏
    
    **Use Cases:**
    - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
    - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏
    - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã
    """
    return await service.create_category(category.name, category.description)

@router.get(
    "/categories/",
    response_model=List[Category],
    summary="üìã List Categories ‚Äì –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π",
    response_description="–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"
)
async def get_categories(
    service: CategoryService = Depends(get_category_service)
):
    """
    üìã **List Categories** - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö.
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    - ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è)
    - üî§ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
    - üìà –°—á–µ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    - üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ UI
    
    **Response Example:**
    ```json
    [
        {
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "name": "–ê—Ä–º–∞—Ç—É—Ä–∞",
            "description": "–°—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–µ—Ä–∂–Ω–∏ –¥–ª—è –∞—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        },
        {
            "id": "550e8400-e29b-41d4-a716-446655440001",
            "name": "–ö–∏—Ä–ø–∏—á",
            "description": "–ö–µ—Ä–∞–º–∏—á–µ—Å–∫–∏–µ –∏ —Å–∏–ª–∏–∫–∞—Ç–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –¥–ª—è –∫–ª–∞–¥–∫–∏ —Å—Ç–µ–Ω",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        },
        {
            "id": "550e8400-e29b-41d4-a716-446655440002",
            "name": "–¶–µ–º–µ–Ω—Ç",
            "description": "–í—è–∂—É—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä—Ç–ª–∞–Ω–¥—Ü–µ–º–µ–Ω—Ç–∞",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        }
    ]
    ```
    
    **Response Status Codes:**
    - **200 OK**: –°–ø–∏—Å–æ–∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω —É—Å–ø–µ—à–Ω–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    
    **Use Cases:**
    - –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ö
    - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    - API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
    """
    return await service.get_categories()

@router.delete(
    "/categories/{category_id}",
    summary="üóëÔ∏è Delete Category ‚Äì –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    response_description="–†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
)
async def delete_category(
    category_id: str,
    service: CategoryService = Depends(get_category_service)
):
    """
    üóëÔ∏è **Delete Category** - –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    
    –£–¥–∞–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –û–ø–µ—Ä–∞—Ü–∏—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞—è, —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏.
    
    **‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏!
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üî• –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
    - ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    - ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    - üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
    
    **Path Parameters:**
    - `category_id`: UUID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    
    **Response Example:**
    ```json
    {
        "success": true,
        "message": "Category deleted successfully",
        "deleted_id": "550e8400-e29b-41d4-a716-446655440000"
    }
    ```
    
    **Response Status Codes:**
    - **200 OK**: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞
    - **404 Not Found**: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
    - **400 Bad Request**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç UUID
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
    
    **‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
    - –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
    - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è
    
    **Use Cases:**
    - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    - –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
    """
    success = await service.delete_category(category_id)
    return {"success": success}

@router.post(
    "/units/",
    response_model=Unit,
    summary="üìè Create Unit ‚Äì –°–æ–∑–¥–∞–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è",
    response_description="–°–æ–∑–¥–∞–Ω–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è"
)
async def create_unit(
    unit: Unit,
    service: UnitService = Depends(get_unit_service)
):
    """
    üìè **Create Unit** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
    
    –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
    –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –æ–±—ä–µ–º–æ–≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üÜî –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID –¥–ª—è –µ–¥–∏–Ω–∏—Ü—ã
    - üìù –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
    - üîç –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    - ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    - üóÑÔ∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î
    
    **Required Fields:**
    - `name`: –ù–∞–∑–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
    
    **Optional Fields:**
    - `description`: –û–ø–∏—Å–∞–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
    
    **Request Body Example:**
    ```json
    {
        "name": "–º¬≥",
        "description": "–ö—É–±–∏—á–µ—Å–∫–∏–π –º–µ—Ç—Ä - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ–±—ä–µ–º–∞ —Å—ã–ø—É—á–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"
    }
    ```
    
    **Response Example:**
    ```json
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "–º¬≥",
        "description": "–ö—É–±–∏—á–µ—Å–∫–∏–π –º–µ—Ç—Ä - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ–±—ä–µ–º–∞ —Å—ã–ø—É—á–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
        "created_at": "2025-06-16T17:30:15.123456Z",
        "updated_at": "2025-06-16T17:30:15.123456Z"
    }
    ```
    
    **Response Status Codes:**
    - **201 Created**: –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
    - **400 Bad Request**: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–¥—É–±–ª–∏–∫–∞—Ç –Ω–∞–∑–≤–∞–Ω–∏—è)
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
    
    **Common Units:**
    - **–û–±—ä–µ–º**: –º¬≥, –ª, –¥–º¬≥
    - **–ú–∞—Å—Å–∞**: –∫–≥, —Ç, –≥
    - **–ü–ª–æ—â–∞–¥—å**: –º¬≤, —Å–º¬≤, –º–º¬≤
    - **–î–ª–∏–Ω–∞**: –º, —Å–º, –º–º
    - **–®—Ç—É—á–Ω—ã–µ**: —à—Ç, —É–ø–∞–∫, –º–µ—à–æ–∫, –ø–∞–ª–ª–µ—Ç–∞
    - **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ**: –ø.–º. (–ø–æ–≥–æ–Ω–Ω—ã–π –º–µ—Ç—Ä), –º.–ø. (–º–µ—Ç—Ä –ø–æ–≥–æ–Ω–Ω—ã–π)
    
    **Use Cases:**
    - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
    - –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ö
    - –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ—Ç –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
    """
    return await service.create_unit(unit.name, unit.description)

@router.get(
    "/units/",
    response_model=List[Unit],
    summary="üìê List Units ‚Äì –°–ø–∏—Å–æ–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è",
    response_description="–°–ø–∏—Å–æ–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è"
)
async def get_units(
    service: UnitService = Depends(get_unit_service)
):
    """
    üìã **List Units** - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    - ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è)
    - üî§ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
    - üìà –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ UI
    - üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤
    
    **Response Example:**
    ```json
    [
        {
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "name": "–∫–≥",
            "description": "–ö–∏–ª–æ–≥—Ä–∞–º–º - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –º–∞—Å—Å—ã",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        },
        {
            "id": "550e8400-e29b-41d4-a716-446655440001",
            "name": "–º¬≥",
            "description": "–ö—É–±–∏—á–µ—Å–∫–∏–π –º–µ—Ç—Ä - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ–±—ä–µ–º–∞",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        },
        {
            "id": "550e8400-e29b-41d4-a716-446655440002",
            "name": "—à—Ç",
            "description": "–®—Ç—É–∫–∞ - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —à—Ç—É—á–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π",
            "created_at": "2025-06-16T17:30:15.123456Z",
            "updated_at": "2025-06-16T17:30:15.123456Z"
        }
    ]
    ```
    
    **Response Status Codes:**
    - **200 OK**: –°–ø–∏—Å–æ–∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω —É—Å–ø–µ—à–Ω–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    
    **Unit Categories:**
    - **–û–±—ä–µ–º**: –º¬≥, –ª, –¥–º¬≥
    - **–ú–∞—Å—Å–∞**: –∫–≥, —Ç, –≥  
    - **–ü–ª–æ—â–∞–¥—å**: –º¬≤, —Å–º¬≤
    - **–î–ª–∏–Ω–∞**: –º, —Å–º, –º–º
    - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ**: —à—Ç, —É–ø–∞–∫, –º–µ—à–æ–∫
    
    **Use Cases:**
    - –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ö
    - –í–∞–ª–∏–¥–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
    - –†–∞—Å—á–µ—Ç—ã –≤ —Å–º–µ—Ç–∞—Ö –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö
    - API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ERP —Å–∏—Å—Ç–µ–º–∞–º–∏
    """
    return await service.get_units()

@router.delete(
    "/units/{unit_id}",
    summary="üóëÔ∏è Delete Unit ‚Äì –£–¥–∞–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è",
    response_description="–†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è –µ–¥–∏–Ω–∏—Ü—ã"
)
async def delete_unit(
    unit_id: str,
    service: UnitService = Depends(get_unit_service)
):
    """
    üóëÔ∏è **Delete Unit** - –£–¥–∞–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
    
    –£–¥–∞–ª—è–µ—Ç –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –û–ø–µ—Ä–∞—Ü–∏—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞—è, —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏.
    
    **‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏!
    
    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - üî• –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
    - ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    - ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    - üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
    
    **Path Parameters:**
    - `unit_id`: UUID –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    
    **Response Example:**
    ```json
    {
        "success": true,
        "message": "Unit deleted successfully", 
        "deleted_id": "550e8400-e29b-41d4-a716-446655440000"
    }
    ```
    
    **Response Status Codes:**
    - **200 OK**: –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞
    - **404 Not Found**: –ï–¥–∏–Ω–∏—Ü–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
    - **400 Bad Request**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç UUID
    - **500 Internal Server Error**: –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
    
    **‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
    - –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
    - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è
    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –°–ò
    
    **Use Cases:**
    - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
    - –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤–≤–æ–¥–∞
    """
    success = await service.delete_unit(unit_id)
    return {"success": success}

 