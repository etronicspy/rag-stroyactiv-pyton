# üéØ Unified Project Rules for RAG Construction Materials API

> –°–±–æ—Ä–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª –¥–ª—è Trae IDE, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ .cursor/rules/

## üêç Python Development Standards

### Language & Style
- **Python 3.9+** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- **FastAPI** —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å async/await –≤–µ–∑–¥–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- **–°—Ç—Ä–æ–≥–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ PEP 8**
- **Type hints** –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π, –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **Docstrings** –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- **Pydantic –º–æ–¥–µ–ª–∏**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (example, schema_extra) –¥–ª—è –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### Architecture Patterns
- **Dependency injection** –¥–ª—è –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å @lru_cache
- **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (ABC)** –¥–ª—è –ë–î –æ–ø–µ—Ä–∞—Ü–∏–π
- **SQLAlchemy 2.0+** —Å async –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
- **Alembic –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è —Å—Ö–µ–º—ã –ë–î
- **Repository pattern** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ë–î

### FastAPI Specific
- **UTF8JSONResponse** –¥–ª—è –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ API
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- **Middleware** –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üåê API Design Principles

### Versioning & Structure
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ /api/v1/**, pydantic –º–æ–¥–µ–ª–∏
- **UTF-8 –æ—Ç–≤–µ—Ç—ã**, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö –ë–î
- **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –º–æ–¥—É–ª–µ–π**: `material_routes.py` –≤–º–µ—Å—Ç–æ `routes.py`

### Data Formats
- **CSV/Excel**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (name, description), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 50MB
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã** –≤ Pydantic —Å—Ö–µ–º–∞—Ö

### Search & Filtering
- **Fallback-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: vector_search ‚Üí –µ—Å–ª–∏ 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Üí SQL LIKE –ø–æ–∏—Å–∫

### Security
- **Rate limiting** —á–µ—Ä–µ–∑ Redis –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥—ã
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫)

## üóÑÔ∏è Database Architecture

### Architectural Patterns
- **Repository pattern** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ë–î
- **Dependency injection** –¥–ª—è –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å @lru_cache
- **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (ABC)** –¥–ª—è –ë–î –æ–ø–µ—Ä–∞—Ü–∏–π
- **–§–∞–±—Ä–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –ë–î
- **Runtime –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ë–î** —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### Vector Databases
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: search, upsert, delete, batch_upsert, get_by_id
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: Qdrant, Weaviate, Pinecone —Å –µ–¥–∏–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **–ë–∞—Ç—á–∏–Ω–≥** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î

### Relational Databases
- **PostgreSQL**: SQLAlchemy 2.0+ —Å async, Alembic –º–∏–≥—Ä–∞—Ü–∏–∏

### Caching
- **Redis**: –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ—Å—Å–∏–π

### Configuration & Connections
- **Connection pooling** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Timeout –∏ retry** –¥–ª—è –≤—Å–µ—Ö –ë–î
- **–õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª—ã

## üö® CRITICAL: Filename Conflict Prevention

### –ó–ê–ü–†–ï–©–ï–ù–ù–´–ï –ò–ú–ï–ù–ê –§–ê–ô–õ–û–í
**–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∏–º–µ–Ω–∞ –¥–ª—è Python —Ñ–∞–π–ª–æ–≤:**

```
os.py, sys.py, time.py, json.py, logging.py, typing.py, 
pathlib.py, collections.py, functools.py, itertools.py,
operator.py, re.py, math.py, datetime.py, random.py,
string.py, io.py, csv.py, sqlite3.py, urllib.py, http.py,
email.py, html.py, xml.py, multiprocessing.py, threading.py,
asyncio.py, subprocess.py, shutil.py, tempfile.py, glob.py,
pickle.py, copy.py, heapq.py, bisect.py, array.py, struct.py,
binascii.py, base64.py, hashlib.py, hmac.py, secrets.py,
uuid.py, decimal.py, fractions.py, statistics.py, socket.py,
ssl.py, select.py, signal.py, mmap.py, ctypes.py, platform.py,
getpass.py, traceback.py, warnings.py, contextlib.py, abc.py,
atexit.py, weakref.py, gc.py, inspect.py, types.py, enum.py,
dataclasses.py, keyword.py, token.py, tokenize.py, ast.py,
unittest.py, doctest.py, pdb.py, profile.py, pstats.py,
timeit.py, cProfile.py, trace.py, test.py
```

### –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´
```
core/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ app_settings.py      # –ù–ï config.py
‚îÇ   ‚îú‚îÄ‚îÄ database_config.py   # –ù–ï db.py
‚îÇ   ‚îú‚îÄ‚îÄ log_config.py        # –ù–ï logging.py
‚îÇ   ‚îî‚îÄ‚îÄ type_definitions.py  # –ù–ï types.py
‚îú‚îÄ‚îÄ exceptions/
‚îÇ   ‚îú‚îÄ‚îÄ api_exceptions.py    # –ù–ï exceptions.py
‚îÇ   ‚îî‚îÄ‚îÄ database_exceptions.py
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ material_service.py  # –ù–ï service.py
    ‚îî‚îÄ‚îÄ search_service.py
```

## üîí Security Rules

### ‚ùå –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò–ô –ó–ê–ü–†–ï–¢ HARDCODED –ó–ù–ê–ß–ï–ù–ò–ô
**–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û**: –ü–æ–ª–Ω—ã–π –∑–∞–ø—Ä–µ—Ç hardcoded –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–¥–µ

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–í–°–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–æ–ª–∂–Ω—ã —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- **–°–¢–†–û–ì–ê–Ø** –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- **–¶–ï–ù–¢–†–ê–õ–ò–ó–ê–¶–ò–Ø** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ core/config –º–æ–¥—É–ª—è—Ö

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
timeout = settings.DATABASE_TIMEOUT
port = settings.SSH_TUNNEL_LOCAL_PORT

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ core/config/constants.py
from core.config.constants import DefaultTimeouts
timeout = DefaultTimeouts.DATABASE

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: Hardcoded –∑–Ω–∞—á–µ–Ω–∏—è
timeout = 30  
port = 5432
```

### Configuration Security
- **.env —Ñ–∞–π–ª—ã** –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã
- **–†–æ—Ç–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π** –∏ –∫–ª—é—á–µ–π –ë–î
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö** (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤

## üß™ Testing Strategy

### Main Testing Framework
- **pytest** —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ë–î
- **–ú–æ–∫–∏** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ë–î –≤ unit —Ç–µ—Å—Ç–∞—Ö
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ë–î

### Test Types
- **Functional —Ç–µ—Å—Ç—ã**: mock-–∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö API
- **Integration —Ç–µ—Å—Ç—ã**: —Ä–µ–∞–ª—å–Ω—ã–µ API –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–∞–±–æ—á–∏—Ö –∫–ª—é—á–µ–π
- **Unit —Ç–µ—Å—Ç—ã**: –∏–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –º–æ–∫–∏
- **Performance —Ç–µ—Å—Ç—ã**: load testing –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### Test Data Management
- **–§–∏–∫—Å—Ç—É—Ä—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ë–î
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö** –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ä–µ–¥**

## üèóÔ∏è Project Structure

### Architecture
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: api/routes, core/config, services
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –∏–∑ core/config
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API** (/api/v1/)
- **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –º–æ–¥—É–ª–µ–π**

### Data Processing
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSV –∏ Excel** –¥–ª—è –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–æ–≤
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã** –≤ Pydantic —Å—Ö–µ–º–∞—Ö
- **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**: `material_models.py`, `response_models.py`

### Performance
- **–ë–∞—Ç—á–∏–Ω–≥** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–ò–∑–±–µ–≥–∞–Ω–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤** —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

## üìä Monitoring & Logging

### Health Checks
- **Health checks** –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –ë–î
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –≤—Å–µ—Ö –ë–î

### Logging Operations
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π** —Å –∫–∞–∂–¥–æ–π –ë–î
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π** –∫ –≤–Ω–µ—à–Ω–∏–º API —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–æ–∫
- **LOG_LEVEL=DEBUG** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üõ†Ô∏è Development Environment

### Environment Setup
- **–§–∞–π–ª .env.local** —Å —Ä–∞–±–æ—á–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö API
- **–ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ .env —Ñ–∞–π–ª—ã** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–§–æ–∫—É—Å –Ω–∞ –ª–æ–≥–∏–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –Ω–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API –∫–ª—é—á–µ–π

### Debugging
- **–£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ timeout –∑–Ω–∞—á–µ–Ω–∏—è** –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **Timeout –∏ retry –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** –¥–ª—è graceful degradation

## üìö Documentation Standards

### Language Standards
- **–ö–æ–¥ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã**: —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, README**: —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π

### Required Documentation
- **ADR** (Architecture Decision Records) –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **README** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è —Å–æ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- **Inline-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –¥–ª—è –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

### Docstrings Requirements
- **Google style** –¥–ª—è Python
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏**: Args, Returns, Raises, Example
- **–í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã, –º–µ—Ç–æ–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏**
- **–í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

### API Documentation
- **OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤** –≤ Pydantic –º–æ–¥–µ–ª—è—Ö
- **–û–ø–∏—Å–∞–Ω–∏–µ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤**
- **–¢–µ–≥–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ –º–æ–¥—É–ª—è–º

## ‚öôÔ∏è Environment & Configuration

### Configuration Protection
- **–§–∞–π–ª .env.local –∑–∞—â–∏—â–µ–Ω** –æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **env.example –∫–∞–∫ —à–∞–±–ª–æ–Ω** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ù–µ –∏–∑–º–µ–Ω—è—Ç—å .env.local** –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### Configuration Management
- **core/config/base.py** - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **core/config/constants.py** - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- **core/config/database.py** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î
- **core/config/ai.py** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### Environment Variables Requirements
- **–í—Å–µ** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è** –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic field_validator
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è** –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (str, int, bool, List[str])
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —á–µ—Ä–µ–∑ Field(description="...")

## üîÑ Git Workflow

### Branching Strategy
- **main** - –ø—Ä–æ–¥–∞–∫—à–Ω –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ PR
- **develop** - –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **feature/** - –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (feature/vector-search-optimization)
- **fix/** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (fix/database-connection-timeout)
- **hotfix/** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### Commit Message Conventions
```
type(scope): description

[optional body]
[optional footer]
```

**–¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤:**
- **feat**: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **fix**: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- **docs**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **style**: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞
- **refactor**: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **test**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- **chore**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Pull Request Requirements
- **–ß–µ—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ Issues** –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞** –ø–µ—Ä–µ–¥ review
- **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** –ª–æ–∫–∞–ª—å–Ω–æ
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### Branch Protection
- **main –≤–µ—Ç–∫–∞**: –∑–∞–ø—Ä–µ—Ç –ø—Ä—è–º—ã—Ö push, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π PR review
- **develop –≤–µ—Ç–∫–∞**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- **–õ–∏–Ω–µ–π–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤** –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–∞

## üöÄ Best Practices Summary

### Code Quality
1. **–°—Ç—Ä–æ–≥–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ** PEP 8 –∏ type hints
2. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ docstrings** –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
3. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤** - –∏–∑–±–µ–≥–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å stdlib
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. **Repository pattern** –¥–ª—è –≤—Å–µ—Ö –ë–î –æ–ø–µ—Ä–∞—Ü–∏–π

### Security
1. **–ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–µ—Ç** hardcoded –∑–Ω–∞—á–µ–Ω–∏–π
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Pydantic
3. **Rate limiting** –∏ CORS –¥–ª—è API
4. **–ó–∞—â–∏—Ç–∞ .env —Ñ–∞–π–ª–æ–≤** –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π** –∏ –ø–∞—Ä–æ–ª–µ–π –ë–î

### Performance
1. **–ë–∞—Ç—á–∏–Ω–≥** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
2. **Connection pooling** –¥–ª—è –ë–î
3. **Timeout –∏ retry** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** –¥–ª—è graceful degradation
5. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Redis

### Testing
1. **pytest** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
2. **–ú–æ–∫–∏** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ë–î
4. **–§–∏–∫—Å—Ç—É—Ä—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ë–î
5. **CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

### Documentation
1. **Documentation-First** –ø–æ–¥—Ö–æ–¥ –¥–ª—è –Ω–æ–≤—ã—Ö features
2. **ADR** –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
3. **OpenAPI** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
4. **README** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ –º–æ–¥—É–ª—è
5. **Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –¥–ª—è –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

---

> üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ .cursor/rules/ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Trae IDE. –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä–µ–º–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è –ª—É—á—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.

> üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª –≤ .cursor/rules/ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Å–±–æ—Ä–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.