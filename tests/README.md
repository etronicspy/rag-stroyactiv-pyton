# üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ RAG Construction Materials API

*–°—Ç–∞—Ç—É—Å: ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é*

## üìñ –û–±–∑–æ—Ä

–¢–µ—Å—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –º–µ–∂–¥—É mock –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ë–î. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤:

- **Unit —Ç–µ—Å—Ç—ã** - –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏
- **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ë–î
- **Functional —Ç–µ—Å—Ç—ã** - end-to-end —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **Performance —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/
‚îú‚îÄ‚îÄ conftest.py                 # –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ pytest.ini                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ unit/                       # Unit —Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_api_endpoints.py   # –¢–µ—Å—Ç—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_services.py        # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_middleware.py      # –¢–µ—Å—Ç—ã middleware
‚îÇ   ‚îî‚îÄ‚îÄ test_utils.py          # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îú‚îÄ‚îÄ integration/                # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_materials_workflow.py    # Workflow –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_database_operations.py  # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ test_file_processing.py      # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ test_vector_search.py        # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
‚îú‚îÄ‚îÄ functional/                 # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_complete_workflows.py   # –ü–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_api_scenarios.py        # API —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ performance/                # –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_load_testing.py         # –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_optimization.py         # –¢–µ—Å—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_monitoring.py           # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ fixtures/                   # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ data_fixtures.py        # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ mock_fixtures.py        # Mock –æ–±—ä–µ–∫—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ database_fixtures.py    # –ë–î —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îî‚îÄ‚îÄ data/                      # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ *.csv
    ‚îú‚îÄ‚îÄ *.json
    ‚îî‚îÄ‚îÄ test_data_helper.py
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ä–∞–±–æ—á–∏—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
# Unit —Ç–µ—Å—Ç—ã (92% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, ~2.5 —Å–µ–∫)
make test-unit

# Performance —Ç–µ—Å—Ç—ã (91% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, ~1.9 —Å–µ–∫) 
make test-performance

# Utils —Ç–µ—Å—Ç—ã (93% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, ~0.1 —Å–µ–∫)
pytest tests/utils/ -v

# –í—Å–µ –≤–º–µ—Å—Ç–µ (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ)
pytest tests/unit/ tests/performance/ tests/utils/ -v
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest tests/unit/ -v

# –¢–æ–ª—å–∫–æ performance —Ç–µ—Å—Ç—ã  
pytest tests/performance/ -v

# –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π
pytest tests/unit/ tests/performance/ tests/utils/ --tb=no -q
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Å—Ç—ã | –£—Å–ø–µ—à–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è | –°—Ç–∞—Ç—É—Å |
|-----------|-------|------------|-------|--------|
| **Unit** | 63 | **92%** ‚úÖ | ~2.5s | –ì–æ—Ç–æ–≤–æ |
| **Performance** | 35 | **91%** ‚úÖ | ~1.9s | –ì–æ—Ç–æ–≤–æ |
| **Utils** | 15 | **93%** ‚úÖ | ~0.1s | –ì–æ—Ç–æ–≤–æ |
| Integration | 41 | 32% ‚ö†Ô∏è | ~0.4s | –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ |
| Functional | 4 | 0% ‚ùå | ~0.9s | –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ |

**–ò—Ç–æ–≥–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö: 117 –∏–∑ 228 —Ç–µ—Å—Ç–æ–≤ (51%)**

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

- **API endpoints** - –≤—Å–µ –ø–æ–∫—Ä—ã—Ç—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- **Materials service** - —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–∏—Å–∫, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **Reference data** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è  
- **Middleware** - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (11 –∏–∑ 16 —Ç–µ—Å—Ç–æ–≤)
- **Performance monitoring** - –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Optimization** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Utilities** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### Integration —Ç–µ—Å—Ç—ã:
- –ü—Ä–æ–±–ª–µ–º—ã –∏–º–ø–æ—Ä—Ç–∞ `Mock`, `DatabaseInitializer`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ–∏–∫—Å—Ç—É—Ä
- –ù—É–∂–Ω—ã –º–µ–ª–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Functional —Ç–µ—Å—Ç—ã:
- –ü—ã—Ç–∞—é—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É Qdrant
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ mock —Ä–µ–∂–∏–º

### Middleware —Ç–µ—Å—Ç—ã:
- 5 —Ç–µ—Å—Ç–æ–≤ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/                    # –ë—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã (92% ‚úÖ)
‚îÇ   ‚îú‚îÄ‚îÄ test_api_endpoints.py    # API —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_middleware.py       # Middleware —Ç–µ—Å—Ç—ã  
‚îÇ   ‚îî‚îÄ‚îÄ test_services.py         # –°–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ performance/             # Performance —Ç–µ—Å—Ç—ã (91% ‚úÖ)
‚îÇ   ‚îú‚îÄ‚îÄ test_monitoring.py       # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ test_optimization.py     # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã (93% ‚úÖ)
‚îÇ   ‚îú‚îÄ‚îÄ test_simple.py           # –ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_load_materials_standalone.py
‚îú‚îÄ‚îÄ integration/             # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (32% ‚ö†Ô∏è)
‚îÇ   ‚îú‚îÄ‚îÄ test_database_operations.py
‚îÇ   ‚îú‚îÄ‚îÄ test_materials_workflow.py
‚îÇ   ‚îî‚îÄ‚îÄ test_vector_search.py
‚îî‚îÄ‚îÄ functional/              # End-to-end (0% ‚ùå)
    ‚îî‚îÄ‚îÄ test_complete_workflows.py
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. **–ó–∞–≤–∏—Å–∞–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ 3-5 —Å–µ–∫—É–Ω–¥
2. **Unit —Ç–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω—ã** - 58 –∏–∑ 63 –ø—Ä–æ—Ö–æ–¥—è—Ç  
3. **Performance —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç** - 32 –∏–∑ 35 –ø—Ä–æ—Ö–æ–¥—è—Ç
4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º
5. **Mock —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –ë–î

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã:
```bash
export TEST_MODE=mock                    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mock –ë–î
export ENVIRONMENT=test                  # –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
export QDRANT_ONLY_MODE=true            # –¢–æ–ª—å–∫–æ Qdrant
export DISABLE_REDIS_CONNECTION=true    # –û—Ç–∫–ª—é—á–∏—Ç—å Redis
export DISABLE_POSTGRESQL_CONNECTION=true # –û—Ç–∫–ª—é—á–∏—Ç—å PostgreSQL
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install pytest pytest-asyncio pytest-timeout pytest-cov pytest-mock
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
pytest tests/unit/test_api_endpoints.py -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
pytest tests/performance/ -v

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest tests/unit/ --cov=. --cov-report=html

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
pytest tests/unit/ tests/performance/ tests/utils/ -v
```

---

**üìä –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: —Å–º. `TESTS_STATUS_REPORT.md`  
**üìã –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: —Å–º. `TESTS_OPTIMIZATION_PLAN.md`  
**üïê –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-06-13

## üéØ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.unit`
- **–†–µ–∂–∏–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–∫–∏
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ (< 1 —Å–µ–∫ –Ω–∞ —Ç–µ—Å—Ç)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏

```python
@pytest.mark.unit
@pytest.mark.asyncio
async def test_material_service_create(client_mock):
    """Unit —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    # –¢–µ—Å—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–æ–∫–∞–º–∏
```

## üÜï –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

–í —Å–∏—Å—Ç–µ–º—É –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–≥–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:

### üîÑ –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —É–¥–∞–ª–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–æ `{"success": true}` –≤–º–µ—Å—Ç–æ `404 Not Found`

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –≤–µ—Å—å —Ü–∏–∫–ª:

#### Integration —Ç–µ—Å—Ç (`test_materials_workflow.py`):
```python
@pytest.mark.integration
async def test_create_delete_double_delete_cycle(client_real):
    """
    –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç:
    1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ ‚úÖ
    2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ‚úÖ  
    3. –ü–µ—Ä–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ ‚Üí {"success": true} ‚úÖ
    4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è ‚Üí 404 ‚úÖ
    5. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ ‚Üí 404 (–ù–ï success!) ‚úÖ
    6. –¢—Ä–µ—Ç—å–µ —É–¥–∞–ª–µ–Ω–∏–µ ‚Üí 404 ‚úÖ
    """
```

#### Unit —Ç–µ—Å—Ç (`test_api_endpoints.py`):
```python
@pytest.mark.unit
def test_create_delete_double_delete_cycle_unit(client_mock):
    """
    Unit —Ç–µ—Å—Ç —Å –º–æ–∫–∞–º–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏
    """
```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:
- `test_delete_nonexistent_material_from_start` - —É–¥–∞–ª–µ–Ω–∏–µ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
- `test_concurrent_delete_operations` - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è

### üéØ –ü–æ–∫—Ä—ã—Ç–∏–µ edge cases

1. **–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª —Å –Ω–∞—á–∞–ª–∞**:
   ```python
   DELETE /api/v1/materials/00000000-0000-0000-0000-000000000000
   ‚Üí 404 {"detail": "Material not found"}
   ```

2. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è**:
   - 3 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
   - –û–∂–∏–¥–∞–µ—Ç—Å—è: 1 —É—Å–ø–µ—Ö (200) + 2 –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (404)

3. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤**:
   - –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —É–∂–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ
   - –í—Å–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404

### ‚ö° –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è (unit)
pytest tests/unit/test_api_endpoints.py::TestMaterialsAPIEndpoints::test_create_delete_double_delete_cycle_unit -v

# –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è (integration)  
pytest tests/integration/test_materials_workflow.py::TestMaterialsWorkflowIntegration::test_create_delete_double_delete_cycle -v

# –í—Å–µ —Ç–µ—Å—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è
pytest -k "delete" -v

# –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞
pytest tests/unit/test_api_endpoints.py tests/integration/test_materials_workflow.py -v
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –°—Ü–µ–Ω–∞—Ä–∏–π | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|---------------|------------------|
| –£–¥–∞–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ | ‚úÖ 200 success | ‚úÖ 200 success |
| –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ | ‚ùå 200 success | ‚úÖ 404 not found |
| –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ | ‚ùå 200 success | ‚úÖ 404 not found |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ~200ms | ~150ms (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ) |

### üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –≤–æ–∑–≤—Ä–∞—Ç –±–∞–≥–∞ –≤ –±—É–¥—É—â–µ–º –∏ —Å–ª—É–∂–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è API –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —É–¥–∞–ª–µ–Ω–∏—è.

### Integration —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.integration`
- **–†–µ–∂–∏–º**: –†–µ–∞–ª—å–Ω—ã–µ –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω–∏–µ (1-10 —Å–µ–∫ –Ω–∞ —Ç–µ—Å—Ç)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```python
@pytest.mark.integration
@pytest.mark.asyncio
async def test_materials_database_workflow(client_real):
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ workflow"""
    # –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ë–î
```

### Functional —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.functional`
- **–†–µ–∂–∏–º**: –ü–æ–ª–Ω—ã–µ end-to-end —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ (5-30 —Å–µ–∫ –Ω–∞ —Ç–µ—Å—Ç)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### Performance —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.performance`
- **–†–µ–∂–∏–º**: –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ (30+ —Å–µ–∫ –Ω–∞ —Ç–µ—Å—Ç)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# Mock —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
pytest -m unit

# –†–µ–∞–ª—å–Ω—ã–µ –ë–î
TEST_MODE=real pytest -m integration
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `tests/conftest.py`:

- `TEST_MODE` - —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`mock`/`real`)
- `QDRANT_URL` - URL Qdrant –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `QDRANT_API_KEY` - API –∫–ª—é—á Qdrant
- `DISABLE_REDIS_CONNECTION` - –æ—Ç–∫–ª—é—á–∏—Ç—å Redis
- `DISABLE_POSTGRESQL_CONNECTION` - –æ—Ç–∫–ª—é—á–∏—Ç—å PostgreSQL

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏

```python
def test_[component]_[action]_[expected_result]():
    """
    –¢–µ—Å—Ç [–æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º]
    Test [description in English]
    """
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

```python
@pytest.mark.unit
@pytest.mark.asyncio
async def test_service_create_material_success():
    """Unit —Ç–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    # Arrange - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    material_data = {"name": "Test Material", "price": 100.0}
    
    # Act - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
    result = await service.create_material(material_data)
    
    # Assert - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    assert result.name == "Test Material"
    assert result.price == 100.0
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä

```python
def test_with_fixtures(sample_material, mock_database_services):
    """–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∏–∫—Å—Ç—É—Ä"""
    # sample_material - –≥–æ—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    # mock_database_services - –∑–∞–º–æ–∫–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
    pass
```

## üîç –§–∏–∫—Å—Ç—É—Ä—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã

- `client_mock` - —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç —Å –º–æ–∫–∞–º–∏
- `client_real` - —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ë–î
- `client` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞
- `sample_material` - –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `sample_price_data` - –æ–±—Ä–∞–∑—Ü—ã —Ü–µ–Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `test_supplier_id` - ID —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

### Mock —Ñ–∏–∫—Å—Ç—É—Ä—ã

- `mock_materials_service` - Mock —Å–µ—Ä–≤–∏—Å–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `mock_vector_db` - Mock –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
- `mock_qdrant_client` - Mock Qdrant –∫–ª–∏–µ–Ω—Ç–∞
- `mock_openai_client` - Mock OpenAI –∫–ª–∏–µ–Ω—Ç–∞

### –§–∏–∫—Å—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `fixtures/data_fixtures.py`:

```python
from tests.fixtures.data_fixtures import TestDataProvider

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
materials = TestDataProvider.get_sample_materials()

# –ü–æ–ª—É—á–µ–Ω–∏–µ CSV –¥–∞–Ω–Ω—ã—Ö
csv_data = TestDataProvider.get_price_list_csv_data()
```

## üõ† –ö–æ–º–∞–Ω–¥—ã Makefile

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `make test-unit` - Unit —Ç–µ—Å—Ç—ã
- `make test-integration` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `make test-functional` - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `make test-performance` - –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `make test-all` - –í—Å–µ —Ç–µ—Å—Ç—ã

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `make test-coverage` - –¢–µ—Å—Ç—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è
- `make test-fast` - –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
- `make test-verbose` - –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
- `make clean-test` - –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `make test-quick` - –ë—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã
- `make test-ci` - –¢–µ—Å—Ç—ã –¥–ª—è CI/CD
- `make test-full` - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
make test-coverage

# –ü—Ä–æ—Å–º–æ—Ç—Ä HTML –æ—Ç—á–µ—Ç–∞
open htmlcov/index.html
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
pytest tests/unit/test_api_endpoints.py::test_health_check -v
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
```bash
make test-pattern PATTERN="material"
```

### –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
```bash
make test-verbose
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
```bash
pytest -x tests/
```

## üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions –ø—Ä–∏–º–µ—Ä
```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.9
      - name: Install dependencies
        run: make install-test-deps
      - name: Run unit tests
        run: make test-unit
      - name: Run integration tests
        run: make test-integration
        env:
          TEST_MODE: real
          QDRANT_URL: ${{ secrets.QDRANT_URL }}
          QDRANT_API_KEY: ${{ secrets.QDRANT_API_KEY }}
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
make test-profile

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
pytest --profile-svg tests/
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TEST_MODE=mock` –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤

2. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make test-fast` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É `@pytest.mark.slow`

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `conftest.py`
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∏–∫—Å—Ç—É—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–º–µ—á–µ–Ω—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏
```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
make help

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
make test-validate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
make check-deps
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è pytest](https://docs.pytest.org/)
- [FastAPI Testing](https://fastapi.tiangolo.com/tutorial/testing/)
- [AsyncMock —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.AsyncMock)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ 